<!-- NAVIGATION -->
<nav class="sticky top-0 z-50 bg-white shadow-sm border-b border-gray-200">
	<div class="container-main">

		<div
			class="flex justify-between items-center h-16">

			<!-- logo -->
			<div class="flex items-center">
				<a class="flex items-center space-x-3" href="{{path('app_home')}}">
					<img class="h-10 w-auto" src="/images/logo.png" alt="CreativeHub">
				</a>
			</div>
			<!-- menu desktop -->
			<div class="hidden md:flex items-center space-x-6">
				<a class="link-nav {{ app.request.attributes.get('_route') == 'app_home' ? 'active' : '' }}" href="{{path('app_home')}}">
					Acceuil</a>

				<a class="link-nav {{ app.request.attributes.get('_route') == 'app_challenge_index' ? 'active' : '' }}" href="#">
					Defis</a>

				{% if app.user %}
					<a class="link-nav {{ app.request.attributes.get('_route') == 'app_challenge_new' ? 'active' : '' }}" href="#">Creer un defi</a>

					{% if is_granted('ROLE_ADMIN') %}
						<a class="link-nav {{ app.request.attributes.get('_route') == 'app_admin' ? 'active' : '' }}" href="#">Admin Dashboard</a>
					{% endif %}


				{% endif %}


			</div>
			<!-- actions utilisateur -->
			<div class="hidden md:flex items-center space-x-4">
				{% if app.user %}
					<a href="#" class="btn-primary flex items-center space-x-2">
						<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 16 16"><path fill="currentColor" d="M11 7c0 1.66-1.34 3-3 3S5 8.66 5 7s1.34-3 3-3s3 1.34 3 3"/><path fill="currentColor" fill-rule="evenodd" d="M16 8c0 4.42-3.58 8-8 8s-8-3.58-8-8s3.58-8 8-8s8 3.58 8 8M4 13.75C4.16 13.484 5.71 11 7.99 11c2.27 0 3.83 2.49 3.99 2.75A6.98 6.98 0 0 0 14.99 8c0-3.87-3.13-7-7-7s-7 3.13-7 7c0 2.38 1.19 4.49 3.01 5.75" clip-rule="evenodd"/></svg>
						<span>Mon profil</span>
					</a>
					<a class="link-nav" href="{{ path('app_logout') }}">Deconnexion</a>
				{% else %}
					<a class="link-nav" href="{{ path('app_login') }}">Connexion</a>
					<a href="{{ path('app_register') }}" class="btn-primary flex items-center space-x-2">
						<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 24 24">
							<g fill="none"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M16 14a5 5 0 0 1 5 5v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1a5 5 0 0 1 5-5zm4-6a1 1 0 0 1 1 1v1h1a1 1 0 1 1 0 2h-1v1a1 1 0 1 1-2 0v-1h-1a1 1 0 1 1 0-2h1V9a1 1 0 0 1 1-1m-8-6a5 5 0 1 1 0 10a5 5 0 0 1 0-10"/></g>
						</svg>
						<span>S'inscrire</span>
					</a>

				{% endif %}

			</div>

			<!-- menu mobile bouton -->
			<button type="button" class="md:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary" id="mobile-menu-button" aria-expanded="false">

				<svg id="menu-icon" class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 24 24"><path fill="currentColor" d="M4 6a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1m0 6a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1m1 5a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2z"/></svg>


				<svg id="close-icon" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 20 20"><path fill="currentColor" d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15l-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152l2.758 3.15a1.2 1.2 0 0 1 0 1.698"/></svg>


			</button>

		</div>
		<!-- menu mobile -->
		<div class="hidden md:hidden" id="mobile-menu">
			<div class="px-2 pt-2 pb-3 space-y-1 border-t border-gray-200 mt-2">
				<a href="{{path("app_home")}}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50">Accueil</a>
				<a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50">Defis</a>
				{% if app.user %}
					<a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50">Creer un defi</a>
					<a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50">Mon profil</a>
					{% if is_granted('ROLE_ADMIN') %}
						<a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-accent hover:text-accent/80 hover:bg-gray-50">Dashboard</a>

					{% endif %}
					<a href="{{ path('app_logout') }}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50">Deconnexion</a>

				{% else %}

					<a href="{{ path('app_login') }}" class="block px-3 py-2 rounded-md text-base font-medium text-white bg-primary hover:bg-primary/90">Connexion</a>
					<a href="{{ path('app_register') }}" class="block px-3 py-2 rounded-md text-base font-medium text-white bg-primary hover:bg-primary/90">S'inscrire</a>
				{% endif %}


			</div>

		</div>

	</div>
</nav>

<script>
	// Mobile menu toggle
document.getElementById('mobile-menu-button') ?. addEventListener('click', function () {
const menu = document.getElementById('mobile-menu');
const menuIcon = document.getElementById('menu-icon');
const closeIcon = document.getElementById('close-icon');


if (menu && menuIcon && closeIcon) {
menu.classList.toggle('hidden');
menuIcon.classList.toggle('hidden');
closeIcon.classList.toggle('hidden');
}
});
</script>
